<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin ‚Äî Wakedonalds</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg:#faf8f5; --white:#ffffff; --ink:#1a1714; --ink2:#4a4540;
            --muted:#9e9890; --border:#e8e4de; --accent:#c8913a;
            --accent-light:#f5ead8; --accent-dark:#a6722a; --red:#d94f3d;
            --green:#3d8c5c; --surface:#f2ede6;
            --shadow:0 2px 16px rgba(26,23,20,0.08);
            --shadow-lg:0 8px 40px rgba(26,23,20,0.12);
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:'Outfit',sans-serif;background:var(--bg);color:var(--ink);min-height:100vh;}
        .nav{position:sticky;top:0;z-index:100;background:var(--white);border-bottom:1px solid var(--border);padding:0 32px;display:flex;align-items:center;justify-content:space-between;height:64px;box-shadow:0 1px 0 var(--border);}
        .logo{font-family:'Cormorant Garamond',serif;font-size:26px;font-weight:600;letter-spacing:0.04em;}
        .logo span{color:var(--accent);font-style:italic;}
        .nav-right{display:flex;align-items:center;gap:12px;}
        .back-btn{background:none;border:1px solid var(--border);border-radius:8px;padding:8px 14px;cursor:pointer;font-family:'Outfit',sans-serif;font-size:13px;color:var(--ink2);transition:all 0.2s;text-decoration:none;color:var(--ink2);}
        .back-btn:hover{border-color:var(--ink);color:var(--ink);}
        .btn-admin{font-size:12px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase;color:var(--muted);background:none;border:1px solid var(--border);border-radius:6px;padding:7px 14px;cursor:pointer;text-decoration:none;color:var(--ink2);}
        .btn-admin:hover{color:var(--ink);border-color:var(--ink2);}
        .btn-logout{font-size:12px;font-weight:500;letter-spacing:0.06em;text-transform:uppercase;color:var(--red);background:none;border:1px solid var(--red);border-radius:6px;padding:7px 14px;cursor:pointer;transition:all 0.2s;}
        .btn-logout:hover{background:var(--red);color:white;}
        .admin-layout{display:flex;min-height:calc(100vh - 64px);}
        .admin-sidebar{width:220px;background:var(--ink);color:white;padding:24px 0;flex-shrink:0;}
        .sidebar-logo{font-family:'Cormorant Garamond',serif;font-size:22px;font-weight:600;color:white;padding:0 20px 24px;border-bottom:1px solid rgba(255,255,255,0.1);margin-bottom:12px;}
        .sidebar-logo span{color:var(--accent);font-style:italic;}
        .sidebar-link{display:flex;align-items:center;gap:10px;padding:11px 20px;font-size:13px;font-weight:500;color:rgba(255,255,255,0.6);cursor:pointer;transition:all 0.15s;border-left:3px solid transparent;}
        .sidebar-link:hover{color:white;background:rgba(255,255,255,0.06);}
        .sidebar-link.active{color:white;background:rgba(200,145,58,0.15);border-left-color:var(--accent);}
        .admin-main{flex:1;padding:32px;overflow-y:auto;}
        .admin-section{display:none;} .admin-section.active{display:block;}
        .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:32px;}
        .stat-card{background:var(--white);border:1px solid var(--border);border-radius:12px;padding:20px;animation:fadeUp 0.4s ease both;}
        .stat-label{font-size:12px;color:var(--muted);font-weight:500;text-transform:uppercase;letter-spacing:0.06em;margin-bottom:8px;}
        .stat-value{font-family:'Cormorant Garamond',serif;font-size:32px;font-weight:600;}
        .stat-sub{font-size:12px;color:var(--green);margin-top:4px;}
        .admin-toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
        .admin-h2{font-family:'Cormorant Garamond',serif;font-size:26px;font-weight:600;}
        .btn-primary{background:var(--accent);color:white;border:none;border-radius:8px;padding:9px 18px;font-family:'Outfit',sans-serif;font-size:13px;font-weight:500;cursor:pointer;transition:background 0.2s;display:inline-flex;align-items:center;gap:6px;}
        .btn-primary:hover{background:var(--accent-dark);}
        .admin-table{width:100%;background:var(--white);border:1px solid var(--border);border-radius:12px;overflow:auto;border-collapse:collapse;}
        .admin-table th{background:var(--surface);padding:12px 16px;text-align:left;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--muted);border-bottom:1px solid var(--border);white-space:nowrap;}
        .admin-table td{padding:14px 16px;font-size:14px;border-bottom:1px solid var(--border);color:var(--ink2);vertical-align:middle;}
        .admin-table tr:last-child td{border-bottom:none;}
        .admin-table tr:hover td{background:var(--bg);}
        .admin-table .note-cell{max-width:220px;white-space:normal;word-break:break-word;}
        .admin-table .items-cell{max-width:200px;font-size:13px;}
        .admin-table .datetime-cell{min-width:160px;white-space:nowrap;}
        .orders-toolbar{display:flex;flex-wrap:wrap;gap:12px;align-items:center;margin-bottom:16px;}
        .orders-toolbar .search-wrap{flex:1;min-width:200px;max-width:400px;}
        .orders-toolbar .search-wrap input,.orders-toolbar .date-wrap input{padding:10px 14px;border:1px solid var(--border);border-radius:8px;font-family:'Outfit',sans-serif;font-size:14px;width:100%;background:var(--bg);}
        .orders-toolbar .search-wrap input:focus,.orders-toolbar .date-wrap input:focus{outline:none;border-color:var(--accent);}
        .orders-toolbar .date-wrap{min-width:160px;}
        .orders-toolbar .date-wrap label,.orders-toolbar .search-wrap label{display:block;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.06em;color:var(--muted);margin-bottom:6px;}
        .orders-toolbar .clear-filters{background:none;border:1px solid var(--border);border-radius:8px;padding:8px 14px;font-size:13px;color:var(--muted);cursor:pointer;}
        .orders-toolbar .clear-filters:hover{color:var(--ink);border-color:var(--ink2);}
        .status-badge{display:inline-flex;align-items:center;gap:5px;padding:4px 10px;border-radius:20px;font-size:11px;font-weight:600;}
        .badge-active{background:#fff4e6;color:#d97706;}
        .badge-ready{background:#e8f5ee;color:var(--green);}
        .badge-picked{background:#f3f4f6;color:var(--muted);}
        .badge-off{background:#fdecea;color:var(--red);}
        .action-btns{display:flex;gap:6px;flex-wrap:wrap;}
        .icon-btn{background:none;border:1px solid var(--border);border-radius:6px;padding:5px 10px;cursor:pointer;font-size:13px;color:var(--ink2);transition:all 0.15s;}
        .icon-btn:hover{border-color:var(--accent);color:var(--accent);}
        .icon-btn.danger:hover{border-color:var(--red);color:var(--red);}
        .modal-overlay{position:fixed;inset:0;background:rgba(26,23,20,0.5);z-index:1000;display:none;align-items:center;justify-content:center;backdrop-filter:blur(4px);}
        .modal-overlay.open{display:flex;}
        .modal{background:white;border-radius:16px;padding:32px;width:480px;max-width:90vw;box-shadow:var(--shadow-lg);animation:modalIn 0.25s ease both;}
        .modal-title{font-family:'Cormorant Garamond',serif;font-size:26px;font-weight:600;margin-bottom:20px;}
        .modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
        .modal-grid .full{grid-column:1/-1;}
        .modal-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:24px;}
        .btn-secondary{background:none;border:1px solid var(--border);border-radius:8px;padding:9px 18px;font-family:'Outfit',sans-serif;font-size:13px;cursor:pointer;color:var(--ink2);transition:all 0.2s;}
        .btn-secondary:hover{border-color:var(--ink);color:var(--ink);}
        .form-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--muted);margin-bottom:6px;display:block;}
        .form-input{width:100%;padding:10px 14px;border:1px solid var(--border);border-radius:8px;font-family:'Outfit',sans-serif;font-size:14px;color:var(--ink);background:var(--bg);outline:none;transition:border-color 0.2s;margin-bottom:12px;}
        .form-input:focus{border-color:var(--accent);}
        select.form-input{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%239e9890' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;}
        .lang-select{padding:6px 10px;border:1px solid var(--border);border-radius:6px;font-size:12px;font-family:'Outfit',sans-serif;color:var(--ink2);background:var(--bg);cursor:pointer;}
        .lang-select:focus{outline:none;border-color:var(--accent);}
        .toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--ink);color:white;padding:12px 22px;border-radius:30px;font-size:13px;font-weight:500;z-index:3000;transition:transform 0.3s cubic-bezier(0.34,1.56,0.64,1);pointer-events:none;}
        .toast.show{transform:translateX(-50%) translateY(0);}
        @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
        @keyframes modalIn{from{opacity:0;transform:scale(0.92) translateY(16px)}to{opacity:1;transform:scale(1) translateY(0)}}

        /* Mobile-friendly layout */
        @media (max-width: 900px) {
            body{padding-bottom:env(safe-area-inset-bottom);}
            .nav{padding:0 16px;min-height:56px;flex-wrap:wrap;padding-left:max(16px,env(safe-area-inset-left));}
            .nav .logo{font-size:18px;}
            .nav-right{flex-wrap:wrap;gap:8px;}
            .nav-right a,.nav-right button,.nav-right .lang-select{min-height:44px;}
            .admin-layout{flex-direction:column;}
            .admin-sidebar{width:100%;display:flex;overflow-x:auto;flex-wrap:nowrap;padding:12px;gap:4px;-webkit-overflow-scrolling:touch;}
            .admin-sidebar .sidebar-logo{display:none;}
            .sidebar-link{padding:12px 16px;min-height:44px;white-space:nowrap;border-radius:8px;border-left:none;margin-bottom:0;}
            .admin-main{padding:16px;padding-left:max(16px,env(safe-area-inset-left));padding-right:max(16px,env(safe-area-inset-right));}
            .stats-grid{grid-template-columns:repeat(2,1fr);gap:12px;}
            .stat-card{padding:16px;}
            .stat-value{font-size:24px;}
            .admin-toolbar{flex-wrap:wrap;gap:12px;}
            .admin-h2{font-size:22px;}
            .admin-table{display:block;overflow-x:auto;-webkit-overflow-scrolling:touch;}
            .admin-table th,.admin-table td{padding:10px 12px;font-size:13px;}
            .admin-table .datetime-cell{min-width:120px;}
            .orders-toolbar .search-wrap{min-width:100%;max-width:100%;}
            .action-btns .icon-btn,.btn-primary{min-height:44px;padding:10px 14px;}
            .modal{padding:24px;width:95vw;max-width:400px;}
            .modal-grid{grid-template-columns:1fr;}
            .toast{bottom:max(24px,env(safe-area-inset-bottom));}
        }
        @media (max-width: 480px) {
            .stats-grid{grid-template-columns:1fr;}
            .admin-table th:nth-child(n+6),.admin-table td:nth-child(n+6){font-size:12px;}
        }
    </style>
</head>
<body>
    <nav class="nav">
        <a href="restaurant-pos.html" class="back-btn" data-i18n="nav_back_menu">‚Üê Back to Menu</a>
        <div class="logo">Wake<span>¬∑</span>Donalds üçî Admin</div>
        <div class="nav-right">
            <select id="lang-select" class="lang-select" aria-label="Language">
                <option value="en">English</option>
                <option value="es">Espa√±ol</option>
            </select>
            <a href="order-history.html" class="btn-admin" data-i18n="nav_order_history">üìã Order History</a>
            <span id="nav-user" style="font-size:13px;color:var(--muted);"></span>
            <button class="btn-logout" onclick="logout()" data-i18n="nav_logout">Logout</button>
        </div>
    </nav>

    <div class="admin-layout">
        <aside class="admin-sidebar">
            <div class="sidebar-logo">Wake<span>¬∑</span>Donalds</div>
            <div class="sidebar-link active" onclick="switchTab('overview',this)"><span>üìä</span> <span data-i18n="admin_overview">Overview</span></div>
            <div class="sidebar-link" onclick="switchTab('menu-mgmt',this)"><span>üçΩÔ∏è</span> <span data-i18n="admin_menu_items">Menu Items</span></div>
            <div class="sidebar-link" onclick="switchTab('orders',this)"><span>üßæ</span> <span data-i18n="admin_all_orders">All Orders</span></div>
            <div class="sidebar-link" onclick="switchTab('users',this)"><span>üë•</span> <span data-i18n="admin_users">Users</span></div>
        </aside>
        <main class="admin-main">
            <div class="admin-section active" id="section-overview">
                <h2 class="admin-h2" style="margin-bottom:20px" data-i18n="admin_dashboard">Dashboard</h2>
                <div class="stats-grid">
                    <div class="stat-card"><div class="stat-label">Total Revenue</div><div class="stat-value" id="stat-revenue">$0</div><div class="stat-sub" id="stat-rev-sub">0 orders</div></div>
                    <div class="stat-card"><div class="stat-label">Total Orders</div><div class="stat-value" id="stat-orders">0</div><div class="stat-sub">Since opening</div></div>
                    <div class="stat-card"><div class="stat-label">Menu Items</div><div class="stat-value" id="stat-items">0</div><div class="stat-sub">Active items</div></div>
                    <div class="stat-card"><div class="stat-label">Avg. Order</div><div class="stat-value" id="stat-avg">$0</div><div class="stat-sub">Per order</div></div>
                </div>
                <div class="admin-h2" style="font-size:20px;margin-bottom:14px" data-i18n="admin_recent_orders">Recent Orders</div>
                <div style="overflow-x:auto;">
                    <table class="admin-table">
                        <thead><tr><th>Order #</th><th>Date & Time</th><th>Customer</th><th>Phone</th><th>Items</th><th>Total</th><th>Status</th></tr></thead>
                        <tbody id="recent-orders-body"></tbody>
                    </table>
                </div>
            </div>
            <div class="admin-section" id="section-menu-mgmt">
                <div class="admin-toolbar"><h2 class="admin-h2" data-i18n="admin_menu_items">Menu Items</h2><button class="btn-primary" onclick="openAddModal()" data-i18n="admin_add_item">+ Add Item</button></div>
                <div style="overflow-x:auto;">
                    <table class="admin-table">
                        <thead><tr><th>Item</th><th>Category</th><th>Price</th><th>Status</th><th>Actions</th></tr></thead>
                        <tbody id="admin-menu-body"></tbody>
                    </table>
                </div>
            </div>
            <div class="admin-section" id="section-users">
                <div class="admin-toolbar"><h2 class="admin-h2" data-i18n="admin_users">Users</h2></div>
                <p class="page-sub" style="font-size:14px;color:var(--muted);margin-bottom:8px;" data-i18n="admin_users_desc">Manage user accounts and roles.</p>
                <p class="page-sub" style="font-size:13px;color:var(--accent-dark);margin-bottom:16px;background:var(--accent-light);padding:10px 14px;border-radius:8px;" data-i18n="admin_users_role_note">Role changes take effect after the user logs out and signs back in.</p>
                <div class="orders-toolbar" style="margin-bottom:16px;">
                    <div class="search-wrap" style="max-width:320px;">
                        <label for="users-search" data-i18n="admin_search_users">Search users</label>
                        <input type="text" id="users-search" placeholder="Name or email‚Ä¶" autocomplete="off"/>
                    </div>
                </div>
                <div style="overflow-x:auto;">
                    <table class="admin-table">
                        <thead><tr><th>Name</th><th>Email</th><th>Role</th><th>Actions</th></tr></thead>
                        <tbody id="users-body"></tbody>
                    </table>
                </div>
            </div>
            <div class="admin-section" id="section-orders">
                <h2 class="admin-h2" style="margin-bottom:12px" data-i18n="admin_all_orders">All Orders</h2>
                <p class="page-sub" style="font-size:14px;color:var(--muted);margin-bottom:12px;">Full order details including date, time, and special notes.</p>
                <div class="orders-toolbar">
                    <div class="search-wrap">
                        <label for="orders-search" data-i18n="admin_search_orders">Search orders</label>
                        <input type="text" id="orders-search" placeholder="Order #, customer, phone, items‚Ä¶" autocomplete="off"/>
                    </div>
                    <div class="date-wrap">
                        <label for="orders-date" data-i18n="admin_filter_date">Filter by date</label>
                        <input type="date" id="orders-date"/>
                    </div>
                    <div class="date-wrap" style="align-self:flex-end;">
                        <label style="opacity:0;">clear</label>
                        <button type="button" class="clear-filters" id="orders-clear-filters" data-i18n="admin_clear_filters">Clear filters</button>
                    </div>
                </div>
                <div style="overflow-x:auto;">
                    <table class="admin-table">
                        <thead><tr><th>Order #</th><th>Date & Time</th><th>Customer</th><th>Phone</th><th>Items</th><th>Subtotal</th><th>Tax</th><th>Total</th><th>Special Notes</th><th>Status</th><th>Actions</th></tr></thead>
                        <tbody id="all-orders-body"></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <div class="modal-overlay" id="item-modal">
        <div class="modal">
            <div class="modal-title" id="modal-title">Add Menu Item</div>
            <div class="modal-grid">
                <div class="full"><label class="form-label">Item Name</label><input class="form-input" id="mi-name" placeholder="e.g. Burger"/></div>
                <div><label class="form-label">Category</label>
                    <select class="form-input" id="mi-category">
                        <option value="Starters">Starters</option>
                        <option value="Mains">Mains</option>
                        <option value="Pasta & Risotto">Pasta & Risotto</option>
                        <option value="Desserts">Desserts</option>
                        <option value="Drinks">Drinks</option>
                    </select>
                </div>
                <div><label class="form-label">Price ($)</label><input class="form-input" id="mi-price" type="number" placeholder="9.99" step="0.01"/></div>
                <div class="full"><label class="form-label">Description</label><input class="form-input" id="mi-desc" placeholder="Brief description‚Ä¶"/></div>
                <div class="full"><label class="form-label">Description (Spanish)</label><input class="form-input" id="mi-desc-es" placeholder="Descripci√≥n en espa√±ol (optional)"/></div>
                <div><label class="form-label">Emoji Icon</label><input class="form-input" id="mi-emoji" placeholder="üçî"/></div>
                <div><label class="form-label">Tag</label>
                    <select class="form-input" id="mi-tag">
                        <option value="">None</option>
                        <option value="popular">‚≠ê Popular</option>
                        <option value="veg">üåø Vegetarian</option>
                        <option value="spicy">üå∂Ô∏è Spicy</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-secondary" onclick="closeModal()">Cancel</button>
                <button class="btn-primary" onclick="saveItem()">Save Item</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

<script src="js/i18n.js"></script>
<script src="js/admin.js"></script>
</body>
</html>
